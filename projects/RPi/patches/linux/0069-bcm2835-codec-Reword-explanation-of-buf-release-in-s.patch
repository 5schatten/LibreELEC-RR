From bc14668b2363091e7c63c9fe9b1157235d298de3 Mon Sep 17 00:00:00 2001
From: Dave Stevenson <dave.stevenson@raspberrypi.org>
Date: Thu, 3 May 2018 15:29:12 +0100
Subject: [PATCH 69/80] bcm2835-codec: Reword explanation of buf release in
 stop_streaming

Signed-off-by: Dave Stevenson <dave.stevenson@raspberrypi.org>
---
 .../vc04_services/bcm2835-codec/bcm2835-v4l2-codec.c       | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

diff --git a/drivers/staging/vc04_services/bcm2835-codec/bcm2835-v4l2-codec.c b/drivers/staging/vc04_services/bcm2835-codec/bcm2835-v4l2-codec.c
index 04a81bb6ac67..d06f42895be5 100644
--- a/drivers/staging/vc04_services/bcm2835-codec/bcm2835-v4l2-codec.c
+++ b/drivers/staging/vc04_services/bcm2835-codec/bcm2835-v4l2-codec.c
@@ -1579,9 +1579,10 @@ static void bcm2835_codec_stop_streaming(struct vb2_queue *q)
 		}
 	}
 
-	/* I can't believe I'm having to release the VCSM handle here, but
-	 * otherwise REQBUFS(0) aborts because someone is using the dmabuf
-	 * before giving me a chance to do anything about it.
+	/*
+	 * Release the VCSM handle here as otherwise REQBUFS(0) aborts because
+	 * someone is using the dmabuf before giving the driver a chance to do
+	 * anything about it.
 	 */
 	for (i = 0; i < q->num_buffers; i++) {
 		vb2 = to_vb2_v4l2_buffer(q->bufs[i]);
-- 
2.17.0

